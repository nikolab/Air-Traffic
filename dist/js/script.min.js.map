{"version":3,"sources":["script.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","$","document","ready","lat","lon","listOfFlights","getElementById","btn","msg","addEventListener","navigator","geolocation","watchPosition","coords","latitude","longitude","error","PERMISSION_DENIED","innerHTML","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","xml","XMLHttpRequest","open","onload","status","data","listItem","counter","Id","flightNumb","Icao","flightAlt","Alt","model","Mdl","manafactured","Man","departure","From","arrival","To","sort","b","insertAdjacentHTML","renderHtml","JSON","parse","responseText","acList","console","log","onerror","send","on","preventDefault","id","this","attr","each","hide","show"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aAEAK,EAAEC,UAAUC,MAAM,WAGd,IACIC,EACAC,EAGAC,EAAgBJ,SAASK,eAAe,gBACxCC,EAAMN,SAASK,eAAe,OAC9BE,EAAMP,SAASK,eAAe,OAElCC,EAAIE,iBAAiB,QAAS,WAEtBC,UAAUC,aACVD,UAAUC,YAAYC,cAI1B,SAAqBlB,GAGjB,OAFAS,EAAMT,EAAEmB,OAAOC,SACfV,EAAMV,EAAEmB,OAAOE,UACC,QAAUZ,EAAM,QAAUC,GAG9C,SAAmBY,GACf,OAAQA,EAAMvB,MACV,KAAKuB,EAAMC,kBACPT,EAAIU,UAAY,mEAChB,MACJ,KAAKF,EAAMG,qBACPX,EAAIU,UAAY,8CAChB,MACJ,KAAKF,EAAMI,QACPZ,EAAIU,UAAY,uEAChB,MACJ,KAAKF,EAAMK,cACPb,EAAIU,UAAY,uCAQ5B,IAAII,EAAM,IAAIC,eACdD,EAAIE,KAAK,MAvCH,kFAwCNF,EAAIG,OAAS,WAES,KAAdH,EAAII,QAAiBJ,EAAII,OAAS,IAe1C,SAAoBC,GAKhB,IAJA,IAAIC,EAAW,GAEXC,EAAU,EAEL3C,EAAI,EAAGA,EAAIyC,EAAK9B,OAAQX,IAAK,CACzByC,EAAKzC,GAAG4C,GAAjB,IACIC,EAAaJ,EAAKzC,GAAG8C,KACrBC,EAAYN,EAAKzC,GAAGgD,IACpBC,EAAQR,EAAKzC,GAAGkD,IAChBC,EAAeV,EAAKzC,GAAGoD,IACvBC,EAAYZ,EAAKzC,GAAGsD,KACpBC,EAAUd,EAAKzC,GAAGwD,GAEtBf,EAAKgB,KAAK,SAAUpD,EAAGqD,GACnB,OAAOA,EAAEV,IAAM3C,EAAE2C,MAGrBN,GAAY,+CAAmDC,EAAU,kEAAsEE,EAAa,0BAA4BE,EAAY,mBAE1L,iBAAmBJ,EAAU,sEAAwEU,EAAY,UAAYE,EAAU,0BAA4BJ,EAAe,mBAAqBF,EAAQ,mBAEzNN,IAGJxB,EAAcwC,mBAAmB,YAAajB,GArC1CkB,CADiBC,KAAKC,MAAM1B,EAAI2B,cACVC,QAEtBC,QAAQC,IAAI,0DAIpB9B,EAAI+B,QAAU,WACVF,QAAQC,IAAI,qBAGhB9B,EAAIgC,SAiCRtD,EAAE,KAAKuD,GAAG,QAAS,SAAUzE,GACzBA,EAAE0E,iBACF,IAAIC,EAAKzD,EAAE0D,MAAMC,KAAK,cACtB3D,EAAE,mBAAmB4D,KAAK,WACtB5D,EAAE0D,MAAMG,OACJ7D,EAAE0D,MAAMC,KAAK,OAASF,GACtBzD,EAAE0D,MAAMI,cAMtB,KAAK,GAAG,CAAC","file":"script.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\n$(document).ready(function () {\n\n    //vars\n    var latlon,\n        lat,\n        lon,\n        query,\n        url = 'https://raw.githubusercontent.com/nikolab/Air-Traffic/master/AircraftList.json',\n        listOfFlights = document.getElementById('list-flights'),\n        btn = document.getElementById('btn'),\n        msg = document.getElementById(\"msg\");\n\n    btn.addEventListener('click', function getLocation() {\n\n        if (navigator.geolocation) {\n            navigator.geolocation.watchPosition(getPosition, showError);\n        }\n\n        //get user location\n        function getPosition(p) {\n            lat = p.coords.latitude;\n            lon = p.coords.longitude;\n            return latlon = \"?lat=\" + lat + \"&lng=\" + lon;\n        }\n\n        function showError(error) {\n            switch (error.code) {\n                case error.PERMISSION_DENIED:\n                    msg.innerHTML = \"<p>You must allow geolocation in order to application works.</p>\";\n                    break;\n                case error.POSITION_UNAVAILABLE:\n                    msg.innerHTML = \"<p>Location information is unavailable.</p>\";\n                    break;\n                case error.TIMEOUT:\n                    msg.innerHTML = \"<p>The request to get user location timed out, please try again.</p>\";\n                    break;\n                case error.UNKNOWN_ERROR:\n                    msg.innerHTML = \"<p>An unknown error occurred.</p>\";\n                    break;\n            }\n        }\n\n        //fetch JSON data\n        //var query = getPosition(latlon);\n        //url += query;\n        var xml = new XMLHttpRequest();\n        xml.open('GET', url);\n        xml.onload = function () {\n\n            if (xml.status >= 200 && xml.status < 400) {\n\n                var flightData = JSON.parse(xml.responseText);\n                renderHtml(flightData.acList);\n            } else {\n                console.log(\"We connected to the server, but it returned an error.\");\n            }\n        };\n\n        xml.onerror = function () {\n            console.log(\"Connection error\");\n        };\n\n        xml.send();\n\n        function renderHtml(data) {\n            var listItem = '';\n            var details = '';\n            var counter = 1;\n\n            for (var i = 0; i < data.length; i++) {\n                var id = data[i].Id;\n                var flightNumb = data[i].Icao;\n                var flightAlt = data[i].Alt;\n                var model = data[i].Mdl;\n                var manafactured = data[i].Man;\n                var departure = data[i].From;\n                var arrival = data[i].To;\n\n                data.sort(function (a, b) {\n                    return b.Alt - a.Alt;\n                });\n\n                listItem += \"<li><a href=\\\"javascript:;\\\" data-count=count-\" + counter + \"><span><i class=\\\"fas fa-plane\\\"></i></span><span>Flight number: \" + flightNumb + \"</span><span>Altitude: \" + flightAlt + \"</span></a></li>\";\n\n                details = \"<div id=count-\" + counter + \" class='flight-details'><span class='cls-btn'></span><ul><li>From: \" + departure + \" - To: \" + arrival + \"</li><li>Manufacturer: \" + manafactured + \"</li><li>Model: \" + model + \"</li></ul></div>\";\n\n                counter++;\n            }\n\n            listOfFlights.insertAdjacentHTML('beforeend', listItem);\n            //listOfFlights.insertAdjacentHTML('beforeend', details);\n        }\n    });\n\n    //show - hide details\n    $('a').on(\"click\", function (e) {\n        e.preventDefault();\n        var id = $(this).attr('data-count');\n        $(\".flight-details\").each(function () {\n            $(this).hide();\n            if ($(this).attr('id') == id) {\n                $(this).show();\n            }\n        });\n    });\n});\n\n},{}]},{},[1]);\n"]}